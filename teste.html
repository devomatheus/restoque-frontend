<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Colunas com Bootstrap</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .col-btn.active {
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }
        .table-container {
            overflow-x: auto;
        }
    </style>
</head>
<body class="bg-light">
    <div class="container py-4">
        <div class="row">
            <div class="col-12">
                <div class="card shadow-sm">
                    <div class="card-header bg-primary text-white">
                        <h1 class="h4 mb-0">Controle de Colunas da Tabela</h1>
                    </div>
                    <div class="card-body">
                        <div class="mb-4">
                            <h2 class="h5 mb-3">Selecione as colunas a serem exibidas:</h2>
                            <div class="d-flex flex-wrap gap-2">
                                <button class="col-btn btn btn-outline-primary active" data-col="0">
                                    ID
                                </button>
                                <button class="col-btn btn btn-outline-primary active" data-col="1">
                                    Nome
                                </button>
                                <button class="col-btn btn btn-outline-primary active" data-col="2">
                                    Email
                                </button>
                                <button class="col-btn btn btn-outline-primary active" data-col="3">
                                    Telefone
                                </button>
                                <button class="col-btn btn btn-outline-primary active" data-col="4">
                                    Cidade
                                </button>
                                <button class="col-btn btn btn-outline-primary active" data-col="5">
                                    Status
                                </button>
                            </div>
                        </div>
                        
                        <div class="table-container">
                            <div id="loading-message" class="alert alert-info text-center">
                                <div class="spinner-border spinner-border-sm me-2" role="status"></div>
                                Carregando dados...
                            </div>
                            
                            <table id="data-table" class="table table-striped table-hover d-none">
                                <thead class="table-dark">
                                    <tr>
                                        <th>ID</th>
                                        <th>Nome</th>
                                        <th>Email</th>
                                        <th>Telefone</th>
                                        <th>Cidade</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Dados serão preenchidos dinamicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function() {
            // Estado das colunas (inicialmente todas visíveis)
            let columnVisibility = [true, true, true, true, true, true];
            
            // Simula uma requisição AJAX para preencher a tabela
            setTimeout(function() {
                populateTable();
                $('#loading-message').addClass('d-none');
                $('#data-table').removeClass('d-none');
            }, 1500);
            
            // Função para preencher a tabela com dados de exemplo
            function populateTable() {
                const data = [
                    { id: 1, nome: "João Silva", email: "joao@email.com", telefone: "(11) 9999-8888", cidade: "São Paulo", status: "Ativo" },
                    { id: 2, nome: "Maria Santos", email: "maria@email.com", telefone: "(21) 8888-7777", cidade: "Rio de Janeiro", status: "Inativo" },
                    { id: 3, nome: "Pedro Oliveira", email: "pedro@email.com", telefone: "(31) 7777-6666", cidade: "Belo Horizonte", status: "Ativo" },
                    { id: 4, nome: "Ana Costa", email: "ana@email.com", telefone: "(41) 6666-5555", cidade: "Curitiba", status: "Ativo" },
                    { id: 5, nome: "Carlos Lima", email: "carlos@email.com", telefone: "(51) 5555-4444", cidade: "Porto Alegre", status: "Inativo" },
                    { id: 6, nome: "Juliana Pereira", email: "juliana@email.com", telefone: "(61) 4444-3333", cidade: "Brasília", status: "Ativo" },
                    { id: 7, nome: "Roberto Alves", email: "roberto@email.com", telefone: "(71) 3333-2222", cidade: "Salvador", status: "Ativo" }
                ];
                
                const tbody = $('#data-table tbody');
                tbody.empty();
                
                data.forEach(item => {
                    const row = $('<tr>');
                    row.append(`<td>${item.id}</td>`);
                    row.append(`<td>${item.nome}</td>`);
                    row.append(`<td>${item.email}</td>`);
                    row.append(`<td>${item.telefone}</td>`);
                    row.append(`<td>${item.cidade}</td>`);
                    row.append(`<td><span class="badge ${item.status === 'Ativo' ? 'bg-success' : 'bg-secondary'}">${item.status}</span></td>`);
                    tbody.append(row);
                });
                
                // Aplica a visibilidade inicial das colunas
                updateColumnVisibility();
            }
            
            // Evento de clique nos botões de coluna
            $('.col-btn').on('click', function() {
                const colIndex = parseInt($(this).data('col'));
                
                // Alterna a visibilidade da coluna
                columnVisibility[colIndex] = !columnVisibility[colIndex];
                
                // Atualiza a aparência do botão
                if (columnVisibility[colIndex]) {
                    $(this).removeClass('btn-outline-secondary').addClass('btn-outline-primary active');
                } else {
                    $(this).removeClass('btn-outline-primary active').addClass('btn-outline-secondary');
                }
                
                // Atualiza a visibilidade das colunas na tabela
                updateColumnVisibility();
            });
            
            // Função para atualizar a visibilidade das colunas na tabela
            function updateColumnVisibility() {
                // Atualiza o cabeçalho
                $('#data-table thead th').each(function(index) {
                    if (columnVisibility[index]) {
                        $(this).removeClass('d-none');
                    } else {
                        $(this).addClass('d-none');
                    }
                });
                
                // Atualiza as células do corpo
                $('#data-table tbody tr').each(function() {
                    $(this).find('td').each(function(index) {
                        if (columnVisibility[index]) {
                            $(this).removeClass('d-none');
                        } else {
                            $(this).addClass('d-none');
                        }
                    });
                });
            }
        });
    </script>
</body>
</html>